---
- name: Start MongoDB container
  docker_compose:
    project_src: /opt/rocketchat
    state: present
    services:
      - mongodb
  become: true
  become_user: "{{ username }}"

- name: Wait for MongoDB to be ready
  wait_for:
    port: 27017
    host: localhost
    timeout: 300 