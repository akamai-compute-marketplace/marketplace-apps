# Linode FileCloud Deployment One-Click APP

FileCloud is a hyper-secure file-sharing platform that provides comprehensive control over your security, data governance, and data residency requirements.
With its powerful integration and branding capabilities, FileCloud gives enterprises the ability to run their own content collaboration, sync, backup, and remote access solution as part of their own infrastructures.

FileCloud has powerful integration capabilities. Our flexible APIs mean you can ensure file sharing occurs only within your core business SaaS application, using your own brand identity.


## Software Included

| Software  | Version   | Description   |
| :---      | :----     | :---          |
| FileCloud   | Latest    | Enterprise File Sharing |


**Supported Distributions:**

- Ubuntu 22.04 LTS

## Linode Helpers Included

| Name  | Action  |
| :---  | :---    |
| Hostname   | The Hostname module uses `dnsdomainname -A` to detect the Linode's FQDN and write to the `/etc/hosts` file. This defaults to the Linode's automatically assigned rDNS. To use a custom FQDN see [Configure your Linode for Reverse DNS](https://www.linode.com/docs/guides/configure-your-linode-for-reverse-dns/).  |
| Update Packages   | The Update Packages module performs apt update and upgrade actions as root.  |
| UFW   | The UFW module will utilize a list generated by `linode_helpers/ufw/ufwgen.yml` in the `group_vars/linode/vars` and enables the service.  |
| Fail2Ban   | The Fail2Ban module installs, activates and enables the Fail2Ban service.  |

## Use our API

Customers can choose to the deploy FileCloud through the Linode Marketplace or directly using API. Before using the commands below, you will need to create an [API token](https://www.linode.com/docs/products/tools/linode-api/get-started/#create-an-api-token) or configure [linode-cli](https://www.linode.com/products/cli/) on an environment.

Make sure that the following values are updated at the top of the code block before running the commands:
- TOKEN
- SOA_EMAIL_ADDRESS
- ROOT_PASS

SHELL:
```
export TOKEN="YOUR API TOKEN"
export SOA_EMAIL_ADDRESS="myemail@domain.com"
export ROOT_PASS="aComplexP@ssword"

curl -H "Content-Type: application/json" \
    -H "Authorization: Bearer ${TOKEN}" \
    -X POST -d '{
      "backups_enabled": true,
      "swap_size": 512,
      "image": "linode/ubuntu2204",
      "root_pass": "${ROOT_PASS}",
      "stackscript_id": 691620,
      "stackscript_data": {
        "soa_email_address": "${SOA_EMAIL_ADDRESS}"
        "disable_root": "No",
        "user_name": "sudo_user",
        "password": "sudo_user_password",
        "pubkey": "ssh-rsa AAAA_valid_public_ssh_key_123456785== user@their-computer",
        "token_password": "A_Valid_API_Token",
        "subdomain": "examplesubdomain",
        "domain": "domain.tld"
      },
      "authorized_users": [
        "myUser",
        "secondaryUser"
      ],
      "booted": true,
      "label": "linode123",
      "type": "g6-standard-2",
      "region": "us-east",
      "group": "Linode-Group"
    }' \
https://api.linode.com/v4/linode/instances
```

CLI:
```
export TOKEN="YOUR API TOKEN"
export SOA_EMAIL_ADDRESS="myemail@domain.com"
export ROOT_PASS="aComplexP@ssword"

linode-cli linodes create \
  --label linode123 \
  --root_pass ${ROOT_PASS} \
  --booted true \
  --stackscript_id 691620 \
  --stackscript_data '{"soa_email_address": "${SOA_EMAIL_ADDRESS}","disable_root": "No","user_name":"sudo_user","password":"sudo_user_password","pubkey":"ssh-rsa AAAA_valid_public_ssh_key_123456785== user@their-computer","token_password":"A_Valid_API_Token","subdomain":"examplesubdomain","domain":"domain.tld"}' \
  --region us-east \
  --type g6-standard-2 \
  --authorized_keys "ssh-rsa AAAA_valid_public_ssh_key_123456785== user@their-computer"
  --authorized_users "myUser"
  --authorized_users "secondaryUser"
```

## Resources

- [Create Linode via API](https://www.linode.com/docs/api/linode-instances/#linode-create)
- [Stackscript referece](https://www.linode.com/docs/guides/writing-scripts-for-use-with-linode-stackscripts-a-tutorial/#user-defined-fields-udfs)

