# Linode Apache Airflow Deployment One-Click APP

Apache Airflow is a powerful open-source platform designed to programmatically author, schedule, and monitor workflows. Built with scalability and flexibility in mind, Airflow allows developers and data engineers to orchestrate complex data pipelines through Directed Acyclic Graphs (DAGs). With its intuitive web-based UI, Airflow makes it easy to visualize tasks, monitor execution, and troubleshoot issues. It integrates seamlessly with popular services and technologies such as cloud providers, databases, and messaging systems, making it a cornerstone for modern data engineering workflows.

## Software Included

| Software   | Version   | Description                |
| :---       | :----     | :---                      |
| Apache Airflow   | latest    | Workflow management tool |
| NGINX      | Latest    | Web server and reverse proxy |

**Supported Distributions:**

- Ubuntu 24.04 LTS

## Linode Helpers Included

| Name  | Action  |
| :---  | :---    |
| Hostname   | The Hostname module uses `dnsdomainname -A` to detect the Linode's FQDN and write to the `/etc/hosts` file. This defaults to the Linode's automatically assigned rDNS. To use a custom FQDN see [Configure your Linode for Reverse DNS](https://www.linode.com/docs/guides/configure-your-linode-for-reverse-dns/).  |
| Update Packages   | The Update Packages module performs apt update and upgrade actions as root.  |
| UFW   | The UFW module will utilize a list generated by `linode_helpers/ufw/ufwgen.yml` in the `group_vars/linode/vars` and enables the service.  |
| Fail2Ban   | The Fail2Ban module installs, activates and enables the Fail2Ban service.  |

## Use our API

Customers can choose to deploy Apache Airflow through the Linode Marketplace or directly using the API. Before using the commands below, you will need to create an [API token](https://www.linode.com/docs/products/tools/linode-api/get-started/#create-an-api-token) or configure [linode-cli](https://www.linode.com/products/cli/) on your environment.

Make sure that the following values are updated at the top of the code block before running the commands:
- TOKEN  
- ROOT_PASS  
- AIRFLOW_USERNAME  
- AIRFLOW_PASSWORD  

### SHELL:
```bash
export TOKEN="YOUR API TOKEN"
export ROOT_PASS="aComplexP@ssword"


curl -H "Content-Type: application/json" \
-H "Authorization: Bearer $TOKEN" \
-X POST -d '{
    "image": "linode/ubuntu24.04",
    "private_ip": true,
    "region": "us-southeast",
    "stackscript_data": {
        "user_name": "admin",
        "disable_root": "No",
        "token_password": "${TOKEN}",
        "subdomain": "",
        "domain": "",
    },
    "stackscript_id": 0000000,
    "type": "g6-dedicated-2",
    "label": "airflow-example",
    "root_pass": "${ROOT_PASS}",
    "authorized_users": [
        "myuser"
    ],
    "disk_encryption": "disabled"
}' https://api.linode.com/v4/linode/instances

## Resources

 - [Create Linode via API](https://www.linode.com/docs/api/linode-instances/#linode-create) 
 - [Stackscript referece](https://www.linode.com/docs/guides/writing-scripts-for-use-with-linode-stackscripts-a-tutorial/#user-defined-fields-udfs) 
 - [Apache Airflow getting started](https://airflow.apache.org/docs/)
